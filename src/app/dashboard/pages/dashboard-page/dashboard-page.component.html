<div class="dashboard__statistics">
  <app-currency-stats
    class="dashboard__currency-stats"
    [coinRate]="coinRate$ | async"
    [coinStats]="coinStats$ | async"
  ></app-currency-stats>
</div>

<div class="dashboard__tables ">
  <div class="dashboard__statistics-cards">
    <app-dashboard-bonded-tokens-card
      [pool]="pool$ | async"
      [loadingTemplate]="cardsLoading"
    ></app-dashboard-bonded-tokens-card>

    <app-dashboard-height-card
      [latestBlockHeader]="(latestBlock$ | async)?.block.header"
      [loadingTemplate]="cardsLoading"
    ></app-dashboard-height-card>
  </div>

  <div class="dashboard__statistics-cards">
    <ng-container *ngIf="advDdvStats$ | async as advDdvStats">
      <app-dashboard-adv-card [adv]="advDdvStats.adv"></app-dashboard-adv-card>

      <app-dashboard-ddv-card [ddv]="advDdvStats.ddv"></app-dashboard-ddv-card>
    </ng-container>
  </div>
</div>

<div class="dashboard__tables">
  <app-info-card>
    <ng-container ngProjectAs="[card-title]">
      Blocks
    </ng-container>

    <ng-container ngProjectAs="[card-show-more]">
      <a
        appTypeface="paragraph"
        class="dashboard__tables-show-more"
        [routerLink]="['/', appRoute.Blocks]"
      >
        Show more
        <svg-icon class="dashboard__tables-show-more-icon" key="expand-right"></svg-icon>
      </a>
    </ng-container>

    <ng-container ngProjectAs="[card-body]" *ngIf="blocks$ | async as blocks; else tablesLoading;">
      <app-blocks-table [data]="blocks"></app-blocks-table>
    </ng-container>
  </app-info-card>

  <app-info-card>
    <ng-container ngProjectAs="[card-title]">
      Transactions
    </ng-container>

    <ng-container ngProjectAs="[card-show-more]">
      <a
        appTypeface="paragraph"
        class="dashboard__tables-show-more"
        [routerLink]="['/', appRoute.Transactions]"
      >
        Show more
        <svg-icon class="dashboard__tables-show-more-icon" key="expand-right"></svg-icon>
      </a>
    </ng-container>

    <ng-container ngProjectAs="[card-body]" *ngIf="transactions$ | async as transactions; else tablesLoading;">
      <app-transactions-table [data]="transactions"></app-transactions-table>
    </ng-container>
  </app-info-card>
</div>

<ng-template #cardsLoading>
  <div class="dashboard__statistics-cards--loading">
    <ngx-skeleton-loader
      [theme]="{
        height: '54px',
        marginTop: '25px',
        marginBottom: '0',
        width: '220px'
      }"
    ></ngx-skeleton-loader>
    <ngx-skeleton-loader
      [theme]="{
        height: '16px',
        marginTop: '15px',
        marginBottom: '0',
        width: '100px'
      }"
    ></ngx-skeleton-loader>
  </div>
</ng-template>

<ng-template #tablesLoading>
  <ngx-skeleton-loader
    class="dashboard__statistics-tables--loading"
    count="6"
    [theme]="{
      height: '40px',
      width: '100%'
    }"
  ></ngx-skeleton-loader>
</ng-template>

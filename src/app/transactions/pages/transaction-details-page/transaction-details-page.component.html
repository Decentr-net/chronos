<app-info-card [contentDivider]="true" [removeBorderBreakpoint]="breakpoint.Mobile">
  <ng-container ngProjectAs="[card-title]">
    <a
      app-button-back
      [routerLink]="['../']"
    ></a>

    <span class="transaction-details__title">
      Transaction details
    </span>
  </ng-container>

  <ng-container
    ngProjectAs="[card-body]"
    *ngIf="transactionDetails$ | async as transactionDetails; else tablesLoading;"
  >
    <div
      class="transaction-details__hash"
      [appTypeface]="(isTablet$ | async) ? 'subheader' : 'header-4'"
    >
      {{ transactionDetails.txhash }}

      <app-page-link class="transaction-details__page-link"></app-page-link>
    </div>

    <div class="transaction-details__divider"></div>

    <app-details-table class="transaction-details__details-table">
      <ng-template [appDetailsTableCellDef]="'Height'">
        <a
          class="transaction-details__block-link"
          [routerLink]="['/', blocksRoute, transactionDetails.height]"
        >
          {{ +transactionDetails.height | numberFormat : null : true }}
        </a>
      </ng-template>

      <ng-template [appDetailsTableCellDef]="'Time'">
        {{ transactionDetails.timestamp | date:'yyyy.MM.dd, HH:mm:ss' }}
      </ng-template>

      <ng-template *ngIf="transactionDetails.tx.value.memo" [appDetailsTableCellDef]="'Memo'">
        {{ transactionDetails.tx.value.memo }}
      </ng-template>
    </app-details-table>

    <div class="transaction-details__divider mod-wide"></div>

    <ng-container *ngFor="let message of transactionDetails.tx.value.msg; let last = last">
      <app-transaction-message
        class="transaction-details__message"
        [txMessage]="message"
      ></app-transaction-message>

      <div
        class="transaction-details__divider"
        *ngIf="!last"
      ></div>
    </ng-container>
  </ng-container>
</app-info-card>

<ng-template #tablesLoading>
  <ngx-skeleton-loader
    class="transaction-details__loading"
    count="6"
    [theme]="{
      height: '40px',
      width: '100%'
    }"
  ></ngx-skeleton-loader>
</ng-template>
